<!DOCTYPE html>
<html lang="es">

<%- include('../partials/meta') %>

<body>
  <%- include('../partials/header') %>

  <main class="container justify-center">
    <section class="collection">
      <article class="collection__content">
        <h3 class="collection__title"><%= coleccion.nombre %></h3>
        <p class="collection__text"><%= coleccion.descripcion %></p>
      </article>
      <picture class="collection__img">
        <img width="300px" src="/uploads/colecciones/coleccion_<%= coleccion.id %>.webp" alt="<%= coleccion.nombre %>">
      </picture>
    </section>

    <section class="slider glide">
      <h3 class="slider__title">Productos de la colecci√≥n <%= coleccion.nombre %></h3>
      <div class="glide__track" data-glide-el="track">
        <ul class="slider__items glide__slides">
        <% productos.forEach(producto=> { %>
          <li class="slider__item glide__slide">
            <article class="card-item">
              <a class="card-item__link" href="/tienda/item/<%= producto.id %>">
                <div class="card-item__cover">
                <% if (producto.novedad == 'Si') { %>
                  <span class="card-item__tag">Nuevo</span>
                <% } else { %>
                  <span></span>
                <% } %>

                  <img class="card-item__img--front" width="300" src="/uploads/productos/producto_<%= producto.id %>.webp" alt="<%= producto.nombre %>" />
                  <img class="card-item__img--box" width="300" src="/uploads/productos/producto_caja_<%= producto.id %>.webp" alt="<%= producto.nombre %>" />
                </div>
                  
                <div class="card-item__content">
                  <p class="card-item__collection"><%= producto.Collection.nombre %></p>
                  <h3 class="card-item__name"><%= producto.nombre %></h3>
                  <p class="card-item__price">$<%= producto.precio %></p>
                  <p class="card-item__promo"><%= producto.cuotas %></p>
                </div>
              </a>
            </article>
          </li>
        <% } )%>
        </ul>
      </div>

      <div class="glide__arrows" data-glide-el="controls">
        <button class="glide__arrow glide__arrow--left" data-glide-dir="<">
          <iconify-icon icon="tabler:chevron-left"></iconify-icon>
        </button>
        <button class="glide__arrow glide__arrow--right" data-glide-dir=">">
          <iconify-icon icon="tabler:chevron-right"></iconify-icon>
        </button>
      </div>
    </section>
  </main>

  <%- include('../partials/footer') %>

  <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@glidejs/glide"></script>
  <script>
    new Glide('.glide', {
      type: 'carousel',
      startAt: 0,
      perView: 3,
      breakpoints: {
        700: {
          perView: 1
        },
        1024: {
          perView: 2
        },
        1200: {
          perView: 3
        }
      }
    }).mount()
  </script>
</body>

</html>